--댓글번호, 게시글번호(외래키), 작성자(외래키), 내용, 작성일
DROP TABLE REPLY;

CREATE SEQUENCE REPLY_SEQ;

CREATE TABLE REPLY(
	REPLY_NO NUMBER PRIMARY KEY,
	BOARD_NO NUMBER NOT NULL,
	MEMBER_ID VARCHAR2(30) NOT NULL,
	REPLY_CONTENT VARCHAR2(200) NOT NULL,
	REPLY_REGDATE DATE NOT NULL,
	
	CONSTRAINT BOARD_NO_FK FOREIGN KEY(BOARD_NO)
	REFERENCES BOARD(BOARD_NO) ON DELETE CASCADE,
	
	CONSTRAINT MEMBER_ID_FK FOREIGN KEY(MEMBER_ID) REFERENCES MEMBER(MEMBER_ID)
	--글이 지워지면 해당 답글도 지워져야 한다.
	--article_number > delete option : cascade
);


SELECT REPLY_NO, BOARD_NO, MEMBER_ID, REPLY_CONTENT, REPLY_REGDATE 
FROM REPLY;

--BOARD_NO가 3인 댓글리스트
SELECT REPLY_NO, BOARD_NO, MEMBER_ID, REPLY_CONTENT, REPLY_REGDATE 
FROM REPLY
WHERE BOARD_NO = 3
ORDER BY REPLY_NO;

--BOARD_NO가 3인 게시물에 댓글 INSERT
INSERT INTO REPLY VALUES(REPLY_SEQ.NEXTVAL, 3, 'admin','admin의 댓글',SYSDATE);

SELECT * FROM MEMBER;
SELECT * FROM BOARD;
SELECT * FROM REPLY;
SELECT * FROM TAB;

INSERT INTO REPLY VALUES(REPLY_SEQ.NEXTVAL, 180, 'admin', '댓글쓰', SYSDATE);
